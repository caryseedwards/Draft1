


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > ArtworkGUIController</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">template.gui.controller</a>
</div>

<h1>Coverage Summary for Class: ArtworkGUIController (template.gui.controller)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ArtworkGUIController</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    64.3%
  </span>
  <span class="absValue">
    (9/14)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    27.6%
  </span>
  <span class="absValue">
    (27/98)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package template.gui.controller;
&nbsp;
&nbsp;import template.algorithms.CirclePackingAlgorithm;
&nbsp;import template.algorithms.RecursiveShapeAlgorithm;
&nbsp;import template.algorithms.SierpinskiShapeAlgorithm;
&nbsp;import template.gui.model.ParametersModel;
&nbsp;import template.gui.view.ArtworkGUIView;
&nbsp;import template.validate.Validate;
&nbsp;
&nbsp;import javax.imageio.ImageIO;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.event.ItemEvent;
&nbsp;import java.awt.image.BufferedImage;
&nbsp;import java.io.File;
&nbsp;import java.io.IOException;
&nbsp;
&nbsp;public class ArtworkGUIController {
&nbsp;    private final ArtworkGUIView view;
&nbsp;    private final ParametersModel model;
&nbsp;    private RecursiveShapeController recursivePanelController;
&nbsp;    private CirclePackingController circlePackingPanelController;
&nbsp;    private SierpinskiController sierpinskiPanelController;
&nbsp;    private Timer animationTimer;
&nbsp;
<b class="fc">&nbsp;    public ArtworkGUIController(ArtworkGUIView view, ParametersModel model) {</b>
<b class="fc">&nbsp;        this.view = view;</b>
<b class="fc">&nbsp;        this.model = model;</b>
<b class="fc">&nbsp;        initialiseControllers();</b>
&nbsp;    }
&nbsp;
&nbsp;    private void initialiseControllers() {
<b class="fc">&nbsp;        recursivePanelController = new RecursiveShapeController(model, view.getRecursivePanelView());</b>
<b class="fc">&nbsp;        circlePackingPanelController = new CirclePackingController(model, view.getCirclePackingPanelView());</b>
<b class="fc">&nbsp;        sierpinskiPanelController = new SierpinskiController(model, view.getSierpinskiPanelView());</b>
<b class="fc">&nbsp;        view.getAlgorithmDropdown().addItemListener(this::handleAlgorithmSelection);</b>
<b class="fc">&nbsp;        view.getGenerateBtn().addActionListener(e -&gt; generateArtwork());</b>
<b class="fc">&nbsp;        view.getSaveBtn().addActionListener(e -&gt; saveImage());</b>
<b class="fc">&nbsp;        view.getResetBtn().addActionListener(e -&gt; view.resetCanvas());</b>
&nbsp;    }
&nbsp;
&nbsp;    public void handleAlgorithmSelection(ItemEvent e) {
<b class="nc">&nbsp;        if (e.getStateChange() == ItemEvent.SELECTED) {</b>
<b class="nc">&nbsp;            String selectedAlgorithm = e.getItem().toString();</b>
<b class="nc">&nbsp;            updateAlgorithmPanelVisibility(selectedAlgorithm);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void updateAlgorithmPanelVisibility(String selectedAlgorithm) {
<b class="fc">&nbsp;        if (animationTimer != null) {</b>
<b class="nc">&nbsp;            animationTimer.stop();</b>
&nbsp;        }
<b class="fc">&nbsp;        view.getCanvas().removeAll();</b>
&nbsp;
<b class="fc">&nbsp;        view.getRecursivePanel().setVisible(&quot;Recursive Shape&quot;.equals(selectedAlgorithm));</b>
<b class="fc">&nbsp;        view.getCirclePackingPanel().setVisible(&quot;Circle Packing&quot;.equals(selectedAlgorithm));</b>
<b class="fc">&nbsp;        view.getSierpinskiPanel().setVisible(&quot;Sierpinski Shape&quot;.equals(selectedAlgorithm));</b>
&nbsp;
<b class="fc">&nbsp;        view.getFrame().add(view.getCanvas(), BorderLayout.CENTER);</b>
<b class="fc">&nbsp;        view.resetCanvas();</b>
<b class="fc">&nbsp;        view.getFrame().invalidate();</b>
<b class="fc">&nbsp;        view.getFrame().validate();</b>
<b class="fc">&nbsp;        view.getFrame().repaint();</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void generateArtwork() {
<b class="nc">&nbsp;        BufferedImage image = view.createBufferedImage();</b>
<b class="nc">&nbsp;        Graphics2D g2d = image.createGraphics();</b>
<b class="nc">&nbsp;        applyRenderingHints(g2d);</b>
&nbsp;
&nbsp;        String validationError;
<b class="nc">&nbsp;        view.setErrorLabel(&quot;&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        switch (view.getAlgorithmDropdown().getSelectedItem()) {</b>
&nbsp;            case &quot;Recursive Shape&quot;:
<b class="nc">&nbsp;                validationError = Validate.validateRecursivePanelView(view.getRecursivePanelView());</b>
<b class="nc">&nbsp;                if (validationError.isEmpty()) {</b>
<b class="nc">&nbsp;                    recursivePanelController.updateModelWithPanelSettings();</b>
<b class="nc">&nbsp;                    RecursiveShapeAlgorithm recursive = new RecursiveShapeAlgorithm(</b>
<b class="nc">&nbsp;                            model.getCanvasParams(), model.getShapesParams(), model.getRecursiveParams());</b>
<b class="nc">&nbsp;                    recursive.executeAlgorithm();</b>
<b class="nc">&nbsp;                    recursive.drawPattern(g2d);</b>
<b class="nc">&nbsp;                } else {</b>
<b class="nc">&nbsp;                    view.setErrorLabel(validationError);</b>
&nbsp;                }
<b class="nc">&nbsp;                break;</b>
&nbsp;            case &quot;Circle Packing&quot;:
<b class="nc">&nbsp;                validationError = Validate.validateCirclePackingPanelView(view.getCirclePackingPanelView());</b>
<b class="nc">&nbsp;                if (validationError.isEmpty()) {</b>
<b class="nc">&nbsp;                    circlePackingPanelController.updateModelWithPanelSettings();</b>
<b class="nc">&nbsp;                    CirclePackingAlgorithm packing = new CirclePackingAlgorithm(</b>
<b class="nc">&nbsp;                            model.getCanvasParams(), model.getShapesParams(), model.getPackingParams());</b>
<b class="nc">&nbsp;                    packing.executeAlgorithm();</b>
&nbsp;
<b class="nc">&nbsp;                    if (animationTimer != null) {</b>
<b class="nc">&nbsp;                        animationTimer.stop();</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    animationTimer = new Timer(packing.getAlgorithmParameters().animationSpeed, e -&gt; {</b>
<b class="nc">&nbsp;                        packing.addCircles();</b>
<b class="nc">&nbsp;                        BufferedImage image1 = view.createBufferedImage();</b>
<b class="nc">&nbsp;                        Graphics2D g2d1 = image1.createGraphics();</b>
<b class="nc">&nbsp;                        applyRenderingHints(g2d1);</b>
<b class="nc">&nbsp;                        packing.drawPattern(g2d1);</b>
<b class="nc">&nbsp;                        g2d1.dispose();</b>
<b class="nc">&nbsp;                        view.setArtworkImage(image1);</b>
<b class="nc">&nbsp;                        view.getCanvas().repaint();</b>
&nbsp;                    });
&nbsp;
<b class="nc">&nbsp;                    animationTimer.start();</b>
<b class="nc">&nbsp;                } else {</b>
<b class="nc">&nbsp;                    view.setErrorLabel(validationError);</b>
&nbsp;                }
<b class="nc">&nbsp;                break;</b>
&nbsp;            case &quot;Sierpinski Shape&quot;:
<b class="nc">&nbsp;                validationError = Validate.validateSierpinskiPanelView(view.getSierpinskiPanelView());</b>
<b class="nc">&nbsp;                if (validationError.isEmpty()) {</b>
<b class="nc">&nbsp;                    sierpinskiPanelController.updateModelWithPanelSettings();</b>
<b class="nc">&nbsp;                    SierpinskiShapeAlgorithm sierpinski = new SierpinskiShapeAlgorithm(</b>
<b class="nc">&nbsp;                            model.getCanvasParams(), model.getShapesParams(), model.getSierpinskiParams());</b>
<b class="nc">&nbsp;                    sierpinski.executeAlgorithm();</b>
<b class="nc">&nbsp;                    sierpinski.drawPattern(g2d);</b>
<b class="nc">&nbsp;                } else {</b>
<b class="nc">&nbsp;                    view.setErrorLabel(validationError);</b>
&nbsp;                }
<b class="nc">&nbsp;                break;</b>
&nbsp;            default:
<b class="nc">&nbsp;                view.getErrorLabel().setText(&quot;Please select a valid algorithm.&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        g2d.dispose();</b>
<b class="nc">&nbsp;        view.setArtworkImage(image);</b>
<b class="nc">&nbsp;        view.getCanvas().repaint();</b>
&nbsp;    }
&nbsp;
&nbsp;    private void applyRenderingHints(Graphics2D g2d) {
<b class="nc">&nbsp;        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);</b>
<b class="nc">&nbsp;        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);</b>
<b class="nc">&nbsp;        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);</b>
<b class="nc">&nbsp;        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    public void saveImage() {
<b class="nc">&nbsp;        BufferedImage image = new BufferedImage(view.getCanvasWidth(), view.getCanvasHeight(), BufferedImage.TYPE_INT_ARGB);</b>
<b class="nc">&nbsp;        Graphics2D g2d = image.createGraphics();</b>
<b class="nc">&nbsp;        view.getCanvas().paint(g2d);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            FileDialog fd = new FileDialog(view.getFrame(), &quot;Save Image&quot;, FileDialog.SAVE);</b>
<b class="nc">&nbsp;            fd.setVisible(true);</b>
<b class="nc">&nbsp;            String filename = fd.getFile();</b>
<b class="nc">&nbsp;            if (filename != null) {</b>
<b class="nc">&nbsp;                File file = new File(fd.getDirectory(), filename);</b>
<b class="nc">&nbsp;                ImageIO.write(image, &quot;PNG&quot;, file);</b>
&nbsp;            }
<b class="nc">&nbsp;        } catch (IOException ex) {</b>
<b class="nc">&nbsp;            view.getErrorLabel().setText(&quot;Error saving image: &quot; + ex.getMessage());</b>
&nbsp;        } finally {
<b class="nc">&nbsp;            g2d.dispose();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public RecursiveShapeController getRecursiveController() {
<b class="fc">&nbsp;        return recursivePanelController;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setRecursiveController(RecursiveShapeController rsc) {
<b class="fc">&nbsp;        recursivePanelController = rsc;</b>
&nbsp;    }
&nbsp;
&nbsp;    public CirclePackingController getPackingController() {
<b class="fc">&nbsp;        return circlePackingPanelController;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setPackingController(CirclePackingController cpc) {
<b class="fc">&nbsp;        circlePackingPanelController = cpc;</b>
&nbsp;    }
&nbsp;
&nbsp;    public SierpinskiController getSierpinskiPanelController() {
<b class="fc">&nbsp;        return sierpinskiPanelController;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setSierpinskiPanelController(SierpinskiController sc) {
<b class="fc">&nbsp;        sierpinskiPanelController = sc;</b>
&nbsp;    }
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-11-18 17:34</div>
</div>
</body>
</html>
